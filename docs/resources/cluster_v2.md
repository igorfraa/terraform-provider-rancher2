---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "rancher2_cluster_v2 Resource - terraform-provider-rancher2"
subcategory: ""
description: |-
  
---

# rancher2_cluster_v2 (Resource)





<!-- schema generated by tfplugindocs -->
## Schema

### Required

- **kubernetes_version** (String) Cluster V2 kubernetes version
- **name** (String) Cluster V2 name

### Optional

- **agent_env_vars** (Block List) Cluster V2 default agent env vars (see [below for nested schema](#nestedblock--agent_env_vars))
- **annotations** (Map of String) Annotations of the resource
- **cloud_credential_secret_name** (String) Cluster V2 cloud credential secret name
- **default_cluster_role_for_project_members** (String) Cluster V2 default cluster role for project members
- **default_pod_security_policy_template_name** (String) Cluster V2 default pod security policy template name
- **enable_network_policy** (Boolean) Enable k8s network policy
- **fleet_namespace** (String)
- **id** (String) The ID of this resource.
- **labels** (Map of String) Labels of the resource
- **local_auth_endpoint** (Block List, Max: 1) Cluster V2 local auth endpoint (see [below for nested schema](#nestedblock--local_auth_endpoint))
- **rke_config** (Block List, Max: 1) Cluster V2 rke config (see [below for nested schema](#nestedblock--rke_config))
- **timeouts** (Block, Optional) (see [below for nested schema](#nestedblock--timeouts))

### Read-Only

- **cluster_registration_token** (List of Object, Sensitive) (see [below for nested schema](#nestedatt--cluster_registration_token))
- **cluster_v1_id** (String)
- **kube_config** (String, Sensitive)
- **resource_version** (String)

<a id="nestedblock--agent_env_vars"></a>
### Nested Schema for `agent_env_vars`

Required:

- **name** (String)
- **value** (String)


<a id="nestedblock--local_auth_endpoint"></a>
### Nested Schema for `local_auth_endpoint`

Optional:

- **ca_certs** (String)
- **enabled** (Boolean)
- **fqdn** (String)


<a id="nestedblock--rke_config"></a>
### Nested Schema for `rke_config`

Optional:

- **additional_manifest** (String) Cluster V2 additional manifest
- **chart_values** (String) Cluster V2 chart values. It should be in YAML format
- **etcd** (Block List, Max: 1) Cluster V2 etcd (see [below for nested schema](#nestedblock--rke_config--etcd))
- **etcd_snapshot_create** (Block List, Max: 1) Cluster V2 etcd snapshot create (see [below for nested schema](#nestedblock--rke_config--etcd_snapshot_create))
- **etcd_snapshot_restore** (Block List, Max: 1) Cluster V2 etcd snapshot restore (see [below for nested schema](#nestedblock--rke_config--etcd_snapshot_restore))
- **local_auth_endpoint** (Block List, Max: 1, Deprecated) Cluster V2 local auth endpoint (see [below for nested schema](#nestedblock--rke_config--local_auth_endpoint))
- **machine_global_config** (String) Cluster V2 machine global config
- **machine_pools** (Block List) Cluster V2 machine pools (see [below for nested schema](#nestedblock--rke_config--machine_pools))
- **machine_selector_config** (Block List) Cluster V2 machine selector config (see [below for nested schema](#nestedblock--rke_config--machine_selector_config))
- **registries** (Block List, Max: 1) Cluster V2 registries (see [below for nested schema](#nestedblock--rke_config--registries))
- **rotate_certificates** (Block List, Max: 1) Cluster V2 certificate rotation (see [below for nested schema](#nestedblock--rke_config--rotate_certificates))
- **upgrade_strategy** (Block List, Max: 1) Cluster V2 upgrade strategy (see [below for nested schema](#nestedblock--rke_config--upgrade_strategy))

<a id="nestedblock--rke_config--etcd"></a>
### Nested Schema for `rke_config.etcd`

Optional:

- **disable_snapshots** (Boolean) Disable ETCD snapshots
- **s3_config** (Block List, Max: 1) ETCD snapshot S3 config (see [below for nested schema](#nestedblock--rke_config--etcd--s3_config))
- **snapshot_retention** (Number) ETCD snapshot retention
- **snapshot_schedule_cron** (String) ETCD snapshot schedule cron (e.g `"0 */5 * * *"`)

<a id="nestedblock--rke_config--etcd--s3_config"></a>
### Nested Schema for `rke_config.etcd.s3_config`

Required:

- **bucket** (String) ETCD snapshot S3 bucket
- **endpoint** (String) ETCD snapshot S3 endpoint

Optional:

- **cloud_credential_name** (String) ETCD snapshot S3 cloud credential name
- **endpoint_ca** (String) ETCD snapshot S3 endpoint CA
- **folder** (String) ETCD snapshot S3 folder
- **region** (String) ETCD snapshot S3 region
- **skip_ssl_verify** (Boolean) Disable ETCD skip ssl verify



<a id="nestedblock--rke_config--etcd_snapshot_create"></a>
### Nested Schema for `rke_config.etcd_snapshot_create`

Required:

- **generation** (Number) ETCD generation to initiate a snapshot


<a id="nestedblock--rke_config--etcd_snapshot_restore"></a>
### Nested Schema for `rke_config.etcd_snapshot_restore`

Required:

- **generation** (Number) ETCD snapshot desired generation
- **name** (String) ETCD snapshot name to restore

Optional:

- **restore_rke_config** (String) ETCD restore RKE config (set to none, all, or kubernetesVersion)


<a id="nestedblock--rke_config--local_auth_endpoint"></a>
### Nested Schema for `rke_config.local_auth_endpoint`

Optional:

- **ca_certs** (String)
- **enabled** (Boolean)
- **fqdn** (String)


<a id="nestedblock--rke_config--machine_pools"></a>
### Nested Schema for `rke_config.machine_pools`

Required:

- **machine_config** (Block List, Min: 1, Max: 1) Machine config data (see [below for nested schema](#nestedblock--rke_config--machine_pools--machine_config))
- **name** (String) Machine pool name

Optional:

- **annotations** (Map of String) Annotations of the resource
- **cloud_credential_secret_name** (String) Machine pool cloud credential secret name
- **control_plane_role** (Boolean) Machine pool control plane role
- **drain_before_delete** (Boolean) Machine pool drain before delete
- **etcd_role** (Boolean) Machine pool etcd role
- **labels** (Map of String) Labels of the resource
- **machine_labels** (Map of String) Labels of the machine
- **max_unhealthy** (String) max unhealthy nodes for automated replacement to be allowed
- **node_drain_timeout** (Number) seconds to wait for machine pool drain to complete before machine deletion
- **node_startup_timeout_seconds** (Number) seconds a new node has to become active before it is replaced
- **paused** (Boolean) Machine pool paused
- **quantity** (Number) Machine pool quantity
- **rolling_update** (Block List, Max: 1) Machine pool rolling update (see [below for nested schema](#nestedblock--rke_config--machine_pools--rolling_update))
- **taints** (Block List) Machine pool taints (see [below for nested schema](#nestedblock--rke_config--machine_pools--taints))
- **unhealthy_node_timeout_seconds** (Number) seconds an unhealthy node has to become active before it is replaced
- **unhealthy_range** (String) range of unhealthy nodes for automated replacement to be allowed
- **worker_role** (Boolean) Machine pool worker role

<a id="nestedblock--rke_config--machine_pools--machine_config"></a>
### Nested Schema for `rke_config.machine_pools.machine_config`

Required:

- **kind** (String) Machine config kind
- **name** (String) Machine config name


<a id="nestedblock--rke_config--machine_pools--rolling_update"></a>
### Nested Schema for `rke_config.machine_pools.rolling_update`

Optional:

- **max_surge** (String) Rolling update max surge
- **max_unavailable** (String) Rolling update max unavailable


<a id="nestedblock--rke_config--machine_pools--taints"></a>
### Nested Schema for `rke_config.machine_pools.taints`

Required:

- **key** (String)
- **value** (String)

Optional:

- **effect** (String)



<a id="nestedblock--rke_config--machine_selector_config"></a>
### Nested Schema for `rke_config.machine_selector_config`

Optional:

- **config** (Map of String) Machine selector config
- **machine_label_selector** (Block List, Max: 1) Machine label selector (see [below for nested schema](#nestedblock--rke_config--machine_selector_config--machine_label_selector))

<a id="nestedblock--rke_config--machine_selector_config--machine_label_selector"></a>
### Nested Schema for `rke_config.machine_selector_config.machine_label_selector`

Optional:

- **match_expressions** (Block List) Label selector match expressions (see [below for nested schema](#nestedblock--rke_config--machine_selector_config--machine_label_selector--match_expressions))
- **match_labels** (Map of String) Label selector match labels

<a id="nestedblock--rke_config--machine_selector_config--machine_label_selector--match_expressions"></a>
### Nested Schema for `rke_config.machine_selector_config.machine_label_selector.match_labels`

Optional:

- **key** (String) Label selector requirement key
- **operator** (String) Label selector operator
- **values** (List of String) Label selector requirement values




<a id="nestedblock--rke_config--registries"></a>
### Nested Schema for `rke_config.registries`

Optional:

- **configs** (Block List) Registry config (see [below for nested schema](#nestedblock--rke_config--registries--configs))
- **mirrors** (Block List) Registry mirrors (see [below for nested schema](#nestedblock--rke_config--registries--mirrors))

<a id="nestedblock--rke_config--registries--configs"></a>
### Nested Schema for `rke_config.registries.configs`

Required:

- **hostname** (String) Registry hostname

Optional:

- **auth_config_secret_name** (String) Registry auth config secret name
- **ca_bundle** (String) Registry CA bundle
- **insecure** (Boolean) Registry insecure connectivity
- **tls_secret_name** (String) Registry TLS secret name. TLS is a pair of Cert/Key


<a id="nestedblock--rke_config--registries--mirrors"></a>
### Nested Schema for `rke_config.registries.mirrors`

Required:

- **hostname** (String) Registry hostname

Optional:

- **endpoints** (List of String) Registry mirror endpoints
- **rewrites** (Map of String) Registry mirror rewrites



<a id="nestedblock--rke_config--rotate_certificates"></a>
### Nested Schema for `rke_config.rotate_certificates`

Required:

- **generation** (Number) Desired certificate rotation generation.

Optional:

- **services** (List of String) Service certificates to rotate with this generation.


<a id="nestedblock--rke_config--upgrade_strategy"></a>
### Nested Schema for `rke_config.upgrade_strategy`

Optional:

- **control_plane_concurrency** (String) How many controlplane nodes should be upgrade at time, 0 is infinite. Percentages are also accepted
- **control_plane_drain_options** (Block List, Max: 1) Controlplane nodes drain options (see [below for nested schema](#nestedblock--rke_config--upgrade_strategy--control_plane_drain_options))
- **worker_concurrency** (String) How many worker nodes should be upgrade at time
- **worker_drain_options** (Block List, Max: 1) Worker nodes drain options (see [below for nested schema](#nestedblock--rke_config--upgrade_strategy--worker_drain_options))

<a id="nestedblock--rke_config--upgrade_strategy--control_plane_drain_options"></a>
### Nested Schema for `rke_config.upgrade_strategy.control_plane_drain_options`

Optional:

- **delete_empty_dir_data** (Boolean) Drain options delete empty dir data
- **disable_eviction** (Boolean) Drain options disable eviction
- **enabled** (Boolean) Drain options enabled?
- **force** (Boolean) Drain options force
- **grace_period** (Number) Drain options grace period
- **ignore_daemon_sets** (Boolean) Drain options ignore daemon sets
- **ignore_errors** (Boolean) Drain options ignore errors
- **skip_wait_for_delete_timeout_seconds** (Number) Drain options skip wait for delete timeout seconds
- **timeout** (Number) Drain options timeout


<a id="nestedblock--rke_config--upgrade_strategy--worker_drain_options"></a>
### Nested Schema for `rke_config.upgrade_strategy.worker_drain_options`

Optional:

- **delete_empty_dir_data** (Boolean) Drain options delete empty dir data
- **disable_eviction** (Boolean) Drain options disable eviction
- **enabled** (Boolean) Drain options enabled?
- **force** (Boolean) Drain options force
- **grace_period** (Number) Drain options grace period
- **ignore_daemon_sets** (Boolean) Drain options ignore daemon sets
- **ignore_errors** (Boolean) Drain options ignore errors
- **skip_wait_for_delete_timeout_seconds** (Number) Drain options skip wait for delete timeout seconds
- **timeout** (Number) Drain options timeout




<a id="nestedblock--timeouts"></a>
### Nested Schema for `timeouts`

Optional:

- **create** (String)
- **delete** (String)
- **update** (String)


<a id="nestedatt--cluster_registration_token"></a>
### Nested Schema for `cluster_registration_token`

Read-Only:

- **annotations** (Map of String)
- **cluster_id** (String)
- **command** (String)
- **id** (String)
- **insecure_command** (String)
- **insecure_node_command** (String)
- **insecure_windows_node_command** (String)
- **labels** (Map of String)
- **manifest_url** (String)
- **name** (String)
- **node_command** (String)
- **token** (String)
- **windows_node_command** (String)


